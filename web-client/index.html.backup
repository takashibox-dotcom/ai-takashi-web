<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Takashi Web Client - Updated 2025-01-21 16:10:00</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ü§ñ</text></svg>">
    <link rel="stylesheet" href="styles.css?v=20250121164000">
    <script src="config.js"></script>
</head>
<body>
    <div class="container">
        <!-- „Éò„ÉÉ„ÉÄ„Éº -->
        <header class="header">
            <h1>AI Takashi Web Client</h1>
            <div class="connection-status" id="connectionStatus">
                <span class="status-indicator" id="statusIndicator"></span>
                <span id="statusText">Êé•Á∂ö„ÉÅ„Çß„ÉÉ„ÇØ‰∏≠...</span>
            </div>
            <div class="session-info">
                <span>„Çª„ÉÉ„Ç∑„Éß„É≥: </span>
                <span id="sessionId">-</span>
            </div>
        </header>

        <!-- „É°„Ç§„É≥„Ç≥„É≥„ÉÜ„É≥„ÉÑ -->
        <main class="main-content">
            <!-- „Çø„Éñ„Éä„Éì„Ç≤„Éº„Ç∑„Éß„É≥ -->
            <nav class="tab-nav">
                <button class="tab-button active" data-tab="chat">„ÉÅ„É£„ÉÉ„Éà</button>
                <button class="tab-button" data-tab="tokens">„Éà„Éº„ÇØ„É≥ÁÆ°ÁêÜ</button>
                <button class="tab-button" data-tab="memory">‰ºöË©±Â±•Ê≠¥</button>
                <button class="tab-button" data-tab="account">„Ç¢„Ç´„Ç¶„É≥„Éà</button>
            </nav>

            <!-- „ÉÅ„É£„ÉÉ„Éà„Çø„Éñ -->
            <div id="chat-tab" class="tab-content active">
                <div class="chat-layout">
                    <!-- Â∑¶ÂÅ¥„Éë„Éç„É´ÔºàË®≠ÂÆö„ÉªÂÖ•ÂäõÔºâ -->
                    <div class="left-panel">
                        <!-- „Ç≠„É£„É©„ÇØ„Çø„ÉºÁÆ°ÁêÜ -->
                        <div class="panel-group">
                            <h3>„Ç≠„É£„É©„ÇØ„Çø„ÉºÁÆ°ÁêÜ</h3>
                            <div class="character-display" id="characterDisplay">AI_takashi</div>
                            <select id="characterSelect" class="character-select">
                                <option value="">„Éá„Éï„Ç©„É´„Éà</option>
                            </select>
                            <div class="character-buttons">
                                <button id="createCharacterBtn" class="btn btn-primary">Êñ∞Ë¶è‰ΩúÊàê</button>
                                <button id="manageCharacterBtn" class="btn btn-secondary">ÁÆ°ÁêÜ</button>
                            </div>
                        </div>

                        <!-- ÁîªÂÉèÈÅ∏Êäû -->
                        <div class="panel-group">
                            <h3>ÁîªÂÉèË™çË≠ò</h3>
                            <div class="image-selection">
                                <div id="imageDisplay">ÁîªÂÉè„ÅåÈÅ∏Êäû„Åï„Çå„Å¶„ÅÑ„Åæ„Åõ„Çì</div>
                                <div class="image-buttons">
                                    <button id="selectImageBtn" class="btn btn-primary">ÁîªÂÉèÈÅ∏Êäû</button>
                                    <button id="clearImageBtn" class="btn btn-secondary">„ÇØ„É™„Ç¢</button>
                                </div>
                            </div>
                        </div>

                        <!-- „Çª„ÉÉ„Ç∑„Éß„É≥ÁÆ°ÁêÜ -->
                        <div class="panel-group">
                            <h3>„Çª„ÉÉ„Ç∑„Éß„É≥ÁÆ°ÁêÜ</h3>
                            <div class="session-buttons">
                                <button id="newSessionBtn" class="btn btn-primary">Êñ∞Ë¶è„Çª„ÉÉ„Ç∑„Éß„É≥</button>
                                <button id="clearChatBtn" class="btn btn-secondary">„ÉÅ„É£„ÉÉ„Éà„ÇØ„É™„Ç¢</button>
                            </div>
                        </div>
                    </div>

                    <!-- Âè≥ÂÅ¥„Éë„Éç„É´Ôºà„ÉÅ„É£„ÉÉ„ÉàÂ±•Ê≠¥Ôºâ -->
                    <div class="right-panel">
                        <div class="chat-container">
                            <div id="chatHistory" class="chat-history"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- „Éà„Éº„ÇØ„É≥ÁÆ°ÁêÜ„Çø„Éñ -->
            <div id="tokens-tab" class="tab-content">
                <div class="token-management">
                    <h3>„Éà„Éº„ÇØ„É≥‰ΩøÁî®Èáè</h3>
                    <div class="token-display" id="tokenDisplayLarge">Ë™≠„ÅøËæº„Åø‰∏≠...</div>
                    <div class="token-actions">
                        <button id="resetTokenBtn" class="btn btn-danger">„Éà„Éº„ÇØ„É≥„É™„Çª„ÉÉ„Éà</button>
                    </div>
                </div>
            </div>

            <!-- ‰ºöË©±Â±•Ê≠¥„Çø„Éñ -->
            <div id="memory-tab" class="tab-content">
                <div class="conversation-history">
                    <h3>‰ºöË©±Â±•Ê≠¥</h3>
                    <div class="history-controls">
                        <div class="search-controls">
                            <input type="text" id="historySearchInput" placeholder="‰ºöË©±„ÇíÊ§úÁ¥¢..." style="padding: 0.5rem; border: 1px solid #ddd; border-radius: 5px; margin-right: 0.5rem;">
                            <button id="historySearchBtn" class="btn btn-primary" style="margin-right: 0.5rem;">Ê§úÁ¥¢</button>
                            <button id="clearSearchBtn" class="btn btn-secondary" style="margin-right: 0.5rem;">„ÇØ„É™„Ç¢</button>
                        </div>
                        <div class="history-actions">
                            <button id="refreshHistoryBtn" class="btn btn-primary" style="background: #007bff; color: white; border: none; padding: 0.5rem 1rem; border-radius: 5px; cursor: pointer; margin-right: 0.5rem;">Êõ¥Êñ∞</button>
                            <button id="saveConversationBtn" class="btn btn-success" style="background: #28a745; color: white; border: none; padding: 0.5rem 1rem; border-radius: 5px; cursor: pointer; margin-right: 0.5rem;">ÊâãÂãï‰øùÂ≠ò</button>
                            <button id="clearHistoryBtn" class="btn btn-danger" style="background: #dc3545; color: white; border: none; padding: 0.5rem 1rem; border-radius: 5px; cursor: pointer;">ÂÖ®ÂâäÈô§</button>
                        </div>
                    </div>
                    <div id="conversationHistoryList" class="conversation-list" style="border: 1px solid #e9ecef; border-radius: 5px; padding: 0.5rem; background: white; min-height: 200px;">
                        <div class="loading">Ë™≠„ÅøËæº„Åø‰∏≠...</div>
                    </div>
                </div>
            </div>

            <!-- „Ç¢„Ç´„Ç¶„É≥„Éà„Çø„Éñ -->
            <div id="account-tab" class="tab-content">
                <div class="account-management">
                    <h3>„Ç¢„Ç´„Ç¶„É≥„ÉàÁÆ°ÁêÜ</h3>
                    <div id="accountStatus">
                        <!-- „É≠„Ç∞„Ç§„É≥Áä∂ÊÖãË°®Á§∫ -->
                        <div class="login-section" id="loginSection">
                            <h3>„É≠„Ç∞„Ç§„É≥</h3>
                            <div class="login-form">
                                <div class="form-group">
                                    <label for="loginUsername">„É¶„Éº„Ç∂„ÉºÂêç„Åæ„Åü„ÅØ„É°„Éº„É´„Ç¢„Éâ„É¨„Çπ:</label>
                                    <input type="text" id="loginUsername" placeholder="„É¶„Éº„Ç∂„ÉºÂêç„Åæ„Åü„ÅØ„É°„Éº„É´„Ç¢„Éâ„É¨„Çπ">
                                </div>
                                <div class="form-group">
                                    <label for="loginPassword">„Éë„Çπ„ÉØ„Éº„Éâ:</label>
                                    <input type="password" id="loginPassword" placeholder="„Éë„Çπ„ÉØ„Éº„Éâ">
                                </div>
                                <div class="form-buttons">
                                    <button id="loginBtn" class="btn btn-primary">„É≠„Ç∞„Ç§„É≥</button>
                                    <button id="showRegisterBtn" class="btn btn-secondary">Êñ∞Ë¶èÁôªÈå≤</button>
                                    <button id="showResetPasswordBtn" class="btn btn-link">„Éë„Çπ„ÉØ„Éº„Éâ„ÇíÂøò„Çå„ÅüÂ†¥Âêà</button>
                                </div>
                            </div>
                        </div>

                        <!-- Êñ∞Ë¶èÁôªÈå≤„Éï„Ç©„Éº„É† -->
                        <div class="register-section" id="registerSection" style="display: none;">
                            <h3>Êñ∞Ë¶èÁôªÈå≤</h3>
                            <div class="register-form">
                                <div class="form-group">
                                    <label for="registerUsername">„É¶„Éº„Ç∂„ÉºÂêç:</label>
                                    <input type="text" id="registerUsername" placeholder="„É¶„Éº„Ç∂„ÉºÂêç">
                                </div>
                                <div class="form-group">
                                    <label for="registerEmail">„É°„Éº„É´„Ç¢„Éâ„É¨„Çπ:</label>
                                    <input type="email" id="registerEmail" placeholder="„É°„Éº„É´„Ç¢„Éâ„É¨„Çπ">
                                </div>
                                <div class="form-group">
                                    <label for="registerPassword">„Éë„Çπ„ÉØ„Éº„Éâ:</label>
                                    <input type="password" id="registerPassword" placeholder="„Éë„Çπ„ÉØ„Éº„ÉâÔºà6ÊñáÂ≠ó‰ª•‰∏äÔºâ">
                                </div>
                                <div class="form-group">
                                    <label for="registerPasswordConfirm">„Éë„Çπ„ÉØ„Éº„ÉâÁ¢∫Ë™ç:</label>
                                    <input type="password" id="registerPasswordConfirm" placeholder="„Éë„Çπ„ÉØ„Éº„ÉâÁ¢∫Ë™ç">
                                </div>
                                <div class="form-buttons">
                                    <button id="registerBtn" class="btn btn-primary">ÁôªÈå≤</button>
                                    <button id="showLoginBtn" class="btn btn-secondary">„É≠„Ç∞„Ç§„É≥„Å´Êàª„Çã</button>
                                </div>
                            </div>
                        </div>

                        <!-- „Éë„Çπ„ÉØ„Éº„Éâ„É™„Çª„ÉÉ„Éà„Éï„Ç©„Éº„É† -->
                        <div class="reset-password-section" id="resetPasswordSection" style="display: none;">
                            <h3>„Éë„Çπ„ÉØ„Éº„Éâ„É™„Çª„ÉÉ„Éà</h3>
                            <div class="reset-password-form">
                                <div class="form-group">
                                    <label for="resetEmail">„É°„Éº„É´„Ç¢„Éâ„É¨„Çπ:</label>
                                    <input type="email" id="resetEmail" placeholder="ÁôªÈå≤Ê∏à„Åø„ÅÆ„É°„Éº„É´„Ç¢„Éâ„É¨„Çπ">
                                </div>
                                <div class="form-buttons">
                                    <button id="resetPasswordBtn" class="btn btn-primary">„É™„Çª„ÉÉ„Éà</button>
                                    <button id="backToLoginBtn" class="btn btn-secondary">„É≠„Ç∞„Ç§„É≥„Å´Êàª„Çã</button>
                                </div>
                            </div>
                        </div>

                        <!-- „É¶„Éº„Ç∂„Éº„Éó„É≠„Éï„Ç£„Éº„É´ -->
                        <div class="user-profile" id="userProfile" style="display: none;">
                            <h3>„Éó„É≠„Éï„Ç£„Éº„É´</h3>
                            <div id="profileInfo" class="profile-info"></div>
                            <div class="profile-actions">
                                <button id="editProfileBtn" class="btn btn-primary">„Éó„É≠„Éï„Ç£„Éº„É´Á∑®ÈõÜ</button>
                                <button id="changePasswordBtn" class="btn btn-secondary">„Éë„Çπ„ÉØ„Éº„ÉâÂ§âÊõ¥</button>
                                <button id="logoutBtn" class="btn btn-danger">„É≠„Ç∞„Ç¢„Ç¶„Éà</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- „Éï„ÉÉ„Çø„Éº -->
        <footer class="footer">
            <div class="footer-buttons">
                <button id="exportBtn" class="btn btn-secondary">„Ç®„ÇØ„Çπ„Éù„Éº„Éà</button>
                <button id="backupBtn" class="btn btn-secondary">„Éê„ÉÉ„ÇØ„Ç¢„ÉÉ„Éó</button>
                <button id="aboutBtn" class="btn btn-secondary">„Ç¢„Éó„É™„Å´„Å§„ÅÑ„Å¶</button>
                <button id="themeBtn" class="btn btn-secondary">üåô</button>
            </div>
        </footer>
    </div>

    <!-- „Éó„É≠„Éï„Ç£„Éº„É´Á∑®ÈõÜ„É¢„Éº„ÉÄ„É´ -->
    <div id="profileModal" class="modal" style="display: none;">
        <div class="modal-content">
            <span class="close" id="closeProfileModal">&times;</span>
            <h3>„Éó„É≠„Éï„Ç£„Éº„É´Á∑®ÈõÜ</h3>
            <div class="form-group">
                <label for="editDisplayName">Ë°®Á§∫Âêç:</label>
                <input type="text" id="editDisplayName">
            </div>
            <div class="form-group">
                <label for="editBio">Ëá™Â∑±Á¥π‰ªã:</label>
                <textarea id="editBio" rows="3"></textarea>
            </div>
            <div class="form-group">
                <label for="editAvatar">„Ç¢„Éê„Çø„ÉºURL:</label>
                <input type="url" id="editAvatar">
            </div>
            <div class="form-actions">
                <button id="saveProfileBtn" class="btn btn-primary">‰øùÂ≠ò</button>
                <button id="cancelProfileBtn" class="btn btn-secondary">„Ç≠„É£„É≥„Çª„É´</button>
            </div>
        </div>
    </div>

    <!-- „Éë„Çπ„ÉØ„Éº„ÉâÂ§âÊõ¥„É¢„Éº„ÉÄ„É´ -->
    <div id="passwordModal" class="modal" style="display: none;">
        <div class="modal-content">
            <span class="close" id="closePasswordModal">&times;</span>
            <h3>„Éë„Çπ„ÉØ„Éº„ÉâÂ§âÊõ¥</h3>
            <div class="form-group">
                <label for="currentPassword">ÁèæÂú®„ÅÆ„Éë„Çπ„ÉØ„Éº„Éâ:</label>
                <input type="password" id="currentPassword">
            </div>
            <div class="form-group">
                <label for="newPassword">Êñ∞„Åó„ÅÑ„Éë„Çπ„ÉØ„Éº„Éâ:</label>
                <input type="password" id="newPassword">
            </div>
            <div class="form-group">
                <label for="confirmNewPassword">Êñ∞„Åó„ÅÑ„Éë„Çπ„ÉØ„Éº„ÉâÁ¢∫Ë™ç:</label>
                <input type="password" id="confirmNewPassword">
            </div>
            <div class="form-actions">
                <button id="savePasswordBtn" class="btn btn-primary">Â§âÊõ¥</button>
                <button id="cancelPasswordBtn" class="btn btn-secondary">„Ç≠„É£„É≥„Çª„É´</button>
            </div>
        </div>
    </div>

    <!-- „Ç≠„É£„É©„ÇØ„Çø„Éº‰ΩúÊàê„É¢„Éº„ÉÄ„É´ -->
    <div id="characterModal" class="modal" style="display: none;">
        <div class="modal-content character-modal">
            <span class="close" id="closeCharacterModal">&times;</span>
            <h3>„Ç≠„É£„É©„ÇØ„Çø„Éº‰ΩúÊàê</h3>
            <form id="characterForm">
                <div class="form-group">
                    <label for="charName">„Ç≠„É£„É©„ÇØ„Çø„ÉºÂêç *</label>
                    <input type="text" id="charName" required>
                </div>
                <div class="form-group">
                    <label for="charPersonality">ÊÄßÊ†º</label>
                    <textarea id="charPersonality" rows="3"></textarea>
                </div>
                <div class="form-group">
                    <label for="charSpeaking">Ë©±„ÅóÊñπ</label>
                    <textarea id="charSpeaking" rows="3"></textarea>
                </div>
                <div class="form-group">
                    <label for="charSpecialization">Â∞ÇÈñÄÂàÜÈáé</label>
                    <input type="text" id="charSpecialization">
                </div>
                <div class="form-group">
                    <label for="charResponse">ÂøúÁ≠î„Çπ„Çø„Ç§„É´</label>
                    <textarea id="charResponse" rows="3"></textarea>
                </div>
                <div class="form-group">
                    <label for="charBackground">ËÉåÊôØ</label>
                    <textarea id="charBackground" rows="3"></textarea>
                </div>
                <div class="form-group">
                    <label for="charCatchphrase">„Ç≠„É£„ÉÉ„ÉÅ„Éï„É¨„Éº„Ç∫</label>
                    <input type="text" id="charCatchphrase">
                </div>
                <div class="form-group">
                    <label for="charGreeting">Êå®Êã∂</label>
                    <textarea id="charGreeting" rows="2"></textarea>
                </div>
                <div class="form-actions">
                    <button type="button" id="previewCharBtn" class="btn btn-info">„Éó„É¨„Éì„É•„Éº</button>
                    <button type="submit" class="btn btn-primary">‰ΩúÊàê</button>
                    <button type="button" id="cancelCharBtn" class="btn btn-secondary">„Ç≠„É£„É≥„Çª„É´</button>
                </div>
            </form>
        </div>
    </div>

    <!-- „É°„É¢„É™Ë©≥Á¥∞„É¢„Éº„ÉÄ„É´ -->
    <div id="memoryDetailModal" class="modal" style="display: none;">
        <div class="modal-content memory-detail">
            <span class="close" id="closeMemoryDetailModal">&times;</span>
            <h3 id="memoryDetailTitle">„É°„É¢„É™Ë©≥Á¥∞</h3>
            <div class="memory-detail-content">
                <div class="memory-meta">
                    <span class="memory-category" id="memoryDetailCategory"></span>
                    <span class="memory-importance" id="memoryDetailImportance"></span>
                    <span class="memory-date" id="memoryDetailDate"></span>
                    <span class="memory-character" id="memoryDetailCharacter"></span>
                </div>
                <div id="memoryDetailTags" style="display: none;">
                    <h4>„Çø„Ç∞:</h4>
                    <div id="memoryDetailTagsList"></div>
                </div>
                <div class="memory-text" id="memoryDetailText"></div>
            </div>
            <div class="memory-actions">
                <button id="editMemoryFromDetailBtn" class="btn btn-warning">Á∑®ÈõÜ</button>
                <button id="deleteMemoryFromDetailBtn" class="btn btn-danger">ÂâäÈô§</button>
                <button id="closeMemoryDetailBtn" class="btn btn-secondary">Èñâ„Åò„Çã</button>
            </div>
        </div>
    </div>

    <!-- „ÉÅ„É£„ÉÉ„ÉàÂÖ•Âäõ„Ç≥„É≥„ÉÜ„ÉäÔºàÂÖ®ÁîªÈù¢Âõ∫ÂÆöÔºâ -->
    <div class="chat-input-container">
        <div class="progress-bar" id="progressBar" style="display: none;"></div>
        <div class="response-time" id="responseTime">ÂæÖÊ©ü‰∏≠</div>
        <div class="input-group">
            <textarea id="userInput" placeholder="„É°„ÉÉ„Çª„Éº„Ç∏„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ..."></textarea>
            <button id="sendBtn" class="btn btn-primary">ÈÄÅ‰ø°</button>
        </div>
    </div>

    <script src="app.js?v=20250121162000"></script>
</body>
</html>
